<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>HackMD Conventer</title>
<style>
body { font-family: Arial, sans-serif; padding: 30px; background: #f9f9f9; }
h1 { color: #333; }
input { width: 60%; padding: 8px; }
button { padding: 8px 12px; margin-left: 10px; }
textarea { width: 100%; height: 300px; margin-top: 20px; }
</style>
</head>
<body>

<h1><center>HackMD ç­†è¨˜ä¸‹è¼‰</center></h1>
<h2><font color=blue>ğŸŒŸ è«‹è¼¸å…¥é è½‰æ›çš„ HackMD ç­†è¨˜ç¶²å€ï¼š</font></h2>

<input type="text" id="urlInput" placeholder="https://hackmd.io/@username/note_id">
<button onclick="downloadNote()">ä¸‹è¼‰Markdownç­†è¨˜</button>

<p><font color=red size="5">ğŸ’¡ ç¶²å€è¼¸å…¥å°æŠ€å·§ï¼š</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ğŸ‘‰ è¼¸å…¥ HackMD å®Œæ•´ç¶²å€ â¡ï¸ ä¸‹è¼‰å–®ç¯‡<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ğŸ‘‰ è¼¸å…¥ https://hackmd.io/@ä½œè€…å¸³è™Ÿ â¡ï¸ è‡ªå‹•ä¸‹è¼‰å…¨éƒ¨ç­†è¨˜<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ğŸ‘‰ è¼¸å…¥ https://hackmd.io/@ä½œè€…å¸³è™Ÿ/æ–‡ç« æ¨™é¡Œ â¡ï¸ ä¸‹è¼‰å–®ç¯‡<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ğŸ‘‰ è¼¸å…¥ https://hackmd.io/@ä½œè€…å¸³è™Ÿ/collection/xxx â¡ï¸ ä¸‹è¼‰å…¨éƒ¨åˆé›†<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ğŸ‘‰ è¼¸å…¥ https://hackmd.io/@jä½œè€…å¸³è™Ÿ?view=all â¡ï¸ ä¸‹è¼‰å…¨éƒ¨<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ğŸ‘‰ æˆ–è¼¸å…¥ä»»ä½• HackMD ä¸»é  â¡ï¸ è‡ªå‹•æŠ“å–æ‰€æœ‰ç­†è¨˜</p>

<center><font color=red size="5"> â€¼ï¸ ç¶²é è£½ä½œç´”å±¬å¨›æ¨‚ï¼Œè«‹å°Šé‡å€‹äººæ™ºæ…§è²¡ç”¢æ¬Šâ€¼ï¸</font></center>

<textarea id="output" placeholder="ç­†è¨˜å…§å®¹Markdownèªæ³•æœƒé¡¯ç¤ºåœ¨é€™è£¡"></textarea>

<script>
async function downloadNote() {
    const url = document.getElementById('urlInput').value.trim();
    if(!url) { alert("è«‹è¼¸å…¥ HackMD ç¶²å€"); return; }

    const output = document.getElementById('output');
    output.value = "æ­£åœ¨ä¸‹è¼‰ç­†è¨˜...\n";

    try {
        // è½‰æ›æˆä¸‹è¼‰ URL
        let notePath = new URL(url).pathname.replace(/^\/+/,'');
        let downloadUrl = `https://hackmd.io/${notePath}/download`;

        // fetch Markdown
        const response = await fetch(downloadUrl);
        if(!response.ok) throw new Error(`HTTP ${response.status}`);
        const mdText = await response.text();

        // é¡¯ç¤ºå…§å®¹
        output.value = mdText;

        // è‡ªå‹•ä¸‹è¼‰ .md
        const safeTitle = notePath.replace(/[\/\\:*?"<>|]/g, "_");
        const blob = new Blob([mdText], {type: "text/markdown;charset=utf-8"});
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = safeTitle + ".md";
        link.click();

        alert("ç­†è¨˜å·²ä¸‹è¼‰å®Œæˆï¼");
    } catch (err) {
        output.value = "";
        alert("ä¸‹è¼‰å¤±æ•—: " + err);
    }
}
</script>

</body>
</html>

